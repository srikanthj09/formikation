{"version":3,"sources":["jquery.formikation.js"],"names":["formikation","dat","els","defaults","mapClass","mapStyle","init","params","document","body","style","maxHeight","this","$","extend","each","is","processRadioCheck","processSelects","processInputFile","el","$el","$label","closest","addClass","attr","on","prop","find","removeClass","trigger","selectInnerSpan","selectSpan","prefix","after","append","changed","updateSelectWH","getClass","e","hasClass","which","blur","focus","not","length","InstallTrigger","stopPropagation","one","target","get","inArray","hover","div","fn","val","replace","prev","html","wrap","parent","prepend","sel","$sel","$spa","next","css","display","w","parseInt","outerWidth","h","outerHeight","-webkit-appearance","width","height","position","opacity","fontSize","suffix","currentSelected","selectSpanInner","children","setTimeout","off","jQuery"],"mappings":"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","file":"jquery.formikation.min.js","sourcesContent":["/*\n\n  Formikation, simple form beautifier\n  By Víctor Ortiz @vorthize\n\n    Collaborators:\n    Carlos Cabo @putuko\n\n  V.0.2 (2014/04/09)\n  git@github.com:vortizhe/formikation.git\n\n*/\n\n;formikation = {\n\n  // Internal variables / DOM caching / etc.\n  dat: {\n    els: null // elements\n  },\n\n  // Default settings / params\n  defaults: {\n    mapClass: true,\n    mapStyle: true\n  },\n\n  // Aquí se inicializa el tema de verdad\n  init: function(params) {\n\n    // filter out <= IE6\n    if (typeof document.body.style.maxHeight === 'undefined') {\n      return this;\n    }\n\n    // Merge the params to default\n    this.defaults = $.extend(this.defaults, params);\n\n    // Process elements in collection\n    this.dat.els.each( function( idx ) {\n      // Check / radio\n      if ($(this).is(':checkbox, :radio')) {\n        formikation.processRadioCheck(this);\n      // Select\n      } else if ($(this).is('select')) {\n        formikation.processSelects(this);\n      // File input\n      } else if ($(this).is('input:file')) {\n        formikation.processInputFile(this);\n      // Nor to be processed\n      } else {\n        // Do nothing?\n      }\n    });\n  },\n\n  // Aquí se procesan los checks\n  processRadioCheck: function(el) {\n    var\n      $el = $(el),\n      $label = $el.closest('label');\n\n    // Add class with sprite\n    if ($el.is(':checkbox')) {\n      $label.addClass('fk-check');\n    } else {\n      $label.addClass('fk-radio');\n    }\n    if (this.defaults.mapClass) {\n      $label.addClass($el.attr('class'));\n    }\n    if (this.defaults.mapStyle) {\n      $label.attr('style', $el.attr('style'));\n    }\n\n    $el.on('fk_update', function () {\n\n      if ($el.prop('checked')) {\n        $el.closest('form').find(':radio[name=\"'+$el.attr('name')+'\"]').closest('label').removeClass('checked');\n        $label.addClass('checked');\n      } else {\n        $label.removeClass('checked');\n      }\n    });\n\n    $el.on('click', function() {\n      $el.trigger('fk_update');\n    });\n\n    $el.trigger('fk_update');\n  },\n\n  // Process selects\n  processSelects: function(el) {\n    var\n      $el = $(el),\n      selectInnerSpan = $('<span />').addClass('fk-select-label'),\n      selectSpan = $('<span />'),\n      prefix = 'fk-select';\n\n    $el.after(selectSpan.append(selectInnerSpan));\n\n    selectSpan.addClass(prefix);\n\n    if (this.defaults.mapClass) {\n      selectSpan.addClass($el.attr('class'));\n    }\n    if (this.defaults.mapStyle) {\n      selectSpan.attr('style', $el.attr('style'));\n    }\n\n    $el.addClass('has-fk-select')\n    .on('update', function () {\n      formikation.changed($el,selectSpan);\n      formikation.updateSelectWH($el);\n    })\n    .on('change', function () {\n        selectSpan.addClass(formikation.getClass($el, 'Changed'));\n        formikation.changed($el,selectSpan);\n        formikation.updateSelectWH($el);\n    })\n    .on('keyup', function (e) {\n      if(!selectSpan.hasClass(formikation.getClass($el, 'Open'))){\n        $el.blur();\n        $el.focus();\n      } else{\n        if(e.which==13||e.which==27){\n          formikation.changed($el,selectSpan);\n        }\n      }\n    })\n    .on('mousedown', function (e) {\n      selectSpan.removeClass(formikation.getClass($el, 'Changed'));\n    })\n    .on('mouseup', function (e) {\n      if( !selectSpan.hasClass(formikation.getClass($el, 'Open'))){\n        // if FF and there are other selects open, just apply focus\n        if($('.'+formikation.getClass($el, 'Open')).not(selectSpan).length>0 && typeof InstallTrigger !== 'undefined'){\n          $el.focus();\n        }else{\n          selectSpan.addClass(formikation.getClass($el, 'Open'));\n          e.stopPropagation();\n          $(document).one('mouseup.'+formikation.getClass($el, 'Open'), function (e) {\n            if( e.target != $el.get(0) && $.inArray(e.target,$el.find('*').get()) < 0 ){\n              $el.blur();\n            }else{\n              formikation.changed($el,selectSpan);\n            }\n          });\n        }\n      }\n    })\n    .focus(function () {\n      selectSpan.removeClass(formikation.getClass($el, '-changed')).addClass(formikation.getClass($el, '-focus'));\n    })\n    .blur(function () {\n      selectSpan.removeClass(formikation.getClass($el, '-focus')+' '+formikation.getClass($el, '-open'));\n    })\n    .hover(function () {\n      selectSpan.addClass(formikation.getClass($el, '-hover'));\n    }, function () {\n      selectSpan.removeClass(formikation.getClass($el, '-hover'));\n    })\n    .trigger('update');\n  },\n\n  // Process input file\n  processInputFile: function(el) {\n    var div = $('<div class=\"fk-file-input\">');\n    $(el).on('change', function(e) {\n      // e.preventDefault();\n      var fn = $(this).val().replace(/C:\\\\fakepath\\\\/i, '');\n      if (!fn) {\n        fn = 'Select file...';\n      }\n      $(this).prev('p').html(fn);\n    });\n    $(el).wrap(div).parent().prepend('<p>Select file...</p>');\n  },\n\n  // Updates select width to match span\n  updateSelectWH: function(sel) {\n    var\n      $sel = $(sel),\n      $spa = $sel.next('span');\n\n    // Set to inline-block before calculating outerHeight\n    $spa.css({\n      display: 'inline-block'\n    });\n\n    var\n      w = parseInt($spa.outerWidth(), 10),\n      h = parseInt($spa.outerHeight(), 10);\n\n    if ($sel.attr('disabled')) {\n      $spa.addClass(formikation.getClass($sel, 'Disabled'));\n    } else {\n      $spa.removeClass(formikation.getClass($sel, 'Disabled'));\n    }\n\n    $sel.css({\n      '-webkit-appearance': 'menulist-button',\n      width: w,\n      height: h,\n      position: 'absolute',\n      opacity: 0,\n      fontSize: $spa.css('font-size')\n    });\n  },\n\n  // HELPERS FUNCTIONS UTILITIES ================\n  // Returns class depending on type adding suffix\n  getClass: function(el, suffix){\n    var prefix = (el.is('input:file')) ? 'fk-file' : 'fk-select';\n    return prefix + suffix;\n  },\n\n  // ?\n  changed: function($el,selectSpan) {\n    var currentSelected = $el.find(':selected'),\n    selectSpanInner = selectSpan.children(':first'),\n    html = currentSelected.html() || $el.val();\n\n    selectSpanInner.html(html);\n\n    if (currentSelected.attr('disabled')) {\n      selectSpan.addClass(formikation.getClass($el, 'fk-disable-option'));\n    } else {\n      selectSpan.removeClass(formikation.getClass($el, 'fk-disable-option'));\n    }\n\n    setTimeout(function() {\n      selectSpan.removeClass(formikation.getClass($el, 'Open'));\n      $(document).off('mouseup.'+formikation.getClass($el, 'Open'));\n    }, 60);\n  }\n\n};\n\n// JQuery hooks\n(function ($) {\n  $.fn.formikation = function(params) {\n    formikation.dat.els = this; // JQuery elements\n    formikation.init(params);\n  };\n})(jQuery);\n"],"sourceRoot":"/source/"}